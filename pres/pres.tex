\documentclass{beamer}
\usetheme{CambridgeUS}
\usepackage[absolute,overlay]{textpos}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{animate}
\usepackage{calc}
\newcounter{m} % Number of sides of the polygon
\setcounter{m}{2}
\newcounter{c} % Internal Control Counter
\usepackage{hyperref}
\hypersetup{pdfpagemode=FullScreen}
\usefonttheme{professionalfonts}
\usepackage{smartdiagram}
\usepackage{times}
\usepackage{changepage}
\providecommand\thispdfpagelabel[1]{}

\usepackage{amssymb}
\usetikzlibrary{arrows.meta}
\usepackage{tikz}
\usepackage{amsmath}
\usepackage{verbatim}
\usetikzlibrary{arrows,shapes}
\usepackage{array,multirow,makecell}
\setcellgapes{1pt}
\makegapedcells
\newcolumntype{R}[1]{>{\raggedleft\arraybackslash }b{#1}}
\newcolumntype{L}[1]{>{\raggedright\arraybackslash }b{#1}}
\newcolumntype{C}[1]{>{\centering\arraybackslash }b{#1}}
\tikzset{
pil/.style={
           ->,
           thick,
           shorten <=2pt,
           shorten >=2pt,}}
\usetikzlibrary{arrows,shapes}
\usetikzlibrary{arrows,positioning}
\usepackage{smartdiagram}
\usepackage{metalogo}
\setbeamertemplate{headline}{}
\tikzstyle{vecArrow} = [thick, decoration={markings,mark=at position
   1 with {\arrow[semithick]{open triangle 60}}},
   double distance=1.4pt, shorten >= 5.5pt,
   preaction = {decorate},
   postaction = {draw,line width=1.4pt, white,shorten >= 4.5pt}]
\tikzstyle{innerWhite} = [semithick, white,line width=1.4pt, shorten >= 4.5pt]

\setbeamertemplate{navigation symbols}{}
\makeatletter
\setbeamertemplate{footline}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
    \usebeamerfont{author in head/foot} {Onur, Bastien, Paul, Florent}
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
    \usebeamerfont{title in head/foot}\insertsection
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
    \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
    \insertframenumber{} / \inserttotalframenumber\hspace*{2ex} 
  \end{beamercolorbox}}%
  \vskip0pt%
}
\makeatother

\newcommand{\margin}{0\paperwidth}


%\beamersetrightmargin{\margin}
%\beamersetleftmargin{\margin}

\newcommand\Wider[2][3em]{%
\makebox[\linewidth][c]{%
  \begin{minipage}{\dimexpr\textwidth+#1\relax}
  \raggedright#2
  \end{minipage}%
  }%
}



\usetikzlibrary{shapes,snakes}

%\input{tex_files/ZZ_newcommand1}

\definecolor{myblue}{RGB}{79,129,189}

\tikzset{%
  >={Latex[width=2mm,length=2mm]},
  % Specifications for style of nodes:
            base/.style = {rectangle, rounded corners, draw=black,
                           minimum width=4cm, minimum height=1cm,
                           text centered, font=\normalfont},
  activityStarts/.style = {base, fill=blue!30},
       startstop/.style = {base, fill=red!30},
    activityRuns/.style = {base, fill=green!30},
         process/.style = {base, minimum width=2.5cm, fill=orange!15,
                           font=\normalfont},
}



\begin{document}

%\usepackage{framed}
%\usepackage{cite,url}
%\usepackage{amsmath,amssymb}
%\usepackage{amscd}
%\usepackage[english] {babel}
%\usepackage[pdftex]{graphicx,color}
%\usepackage{stmaryrd}
%\usepackage{amsmath}
%\usepackage{xspace,calc}
%\usepackage{games}
%\usepackage{booktabs}
%\usepackage{needspace}
%\use package{times}
%\usepackage{algorithmicx} % sorry

\bibliography{abbrev3,crypto,add,add2}


\title{Using Netzob for Active protocol reverse engineering }   
\author{Onur Catakoglu , Bastien Drouot, Paul Germouty, Florent Tardif} 
\date{November 2, 2017} 


\logo{%
    %\includegraphics[width=2cm,height=1cm,keepaspectratio]{zoby.png}%
    \includegraphics[width=2cm,height=1cm,keepaspectratio]{redocsFullColor-W.png}~%
   
}

%\logo{\includegraphics[height=5mm]{limoges.jpg}}

\begin{frame}

	\titlepage
	\begin{tikzpicture}[remember picture,overlay]
    \node[xshift=2cm,yshift=2cm] at (current page.south west) {\includegraphics[scale=0.05]{onur.jpg}};
    \node[xshift=4cm,yshift=2cm] at (current page.south west) {\includegraphics[scale=0.05]{bastien.png}};
    \node[xshift=6cm,yshift=2cm] at (current page.south west) {\includegraphics[scale=0.05]{florent.png}};
    \node[xshift=8cm,yshift=2cm] at (current page.south west) {\includegraphics[scale=0.05]{xlim.png}};
    \node[xshift=10cm,yshift=2cm] at (current page.south west) {\includegraphics[scale=0.05]{amossys.png}};
\end{tikzpicture}

\begin{center}
Supervised By Fr\'{e}d\'{e}ric Guih\'{e}ry
\end{center}
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\begin{frame}


	\tableofcontents

\end{frame}

\section{Introduction}
\begin{frame}
	\tableofcontents[currentsection]
\end{frame}

\begin{frame}{Goal}

  Reverse engineer protocols:

  determine how they work without documentation

  ~

  \begin{block}{Attack Model}
    \begin{itemize}
      \item no previous knowledge of the protocol
      \item access to a client implementation
      \item passive monitoring / active querying of the server
    \end{itemize}
  \end{block}

\end{frame}

\begin{frame}{\textbf{Netzob}}
  \em{Netzob}: framework helping the reverser to discover the protocol
 
  ~

  Provide the following features:

  \begin{itemize}
    \item abstraction of requests with a symbolic representation with fields
    \item tools to send TCP/symbolic messages to the server
    \item symbolic functions to split messages in fields:\\
    \quad\quad$\rightarrow$ \texttt{splitStatic}: use static messages parts\\
    \quad\quad$\rightarrow$ \texttt{splitAligned}: detect moving reccurrent parts\\
    \quad\quad$\rightarrow$ \texttt{splitDelimiter}: use manually entered delimiters
  \end{itemize}


\end{frame}


\begin{frame}{Examples}
  Aligned screen shot (TODO: Onur)
\end{frame}

\begin{frame}{Examples}
  Analyse with \texttt{SpliStatic}

  ~

  \tiny\input{splitstatic.tex}
\end{frame}

\begin{frame}{Examples}
  Analyse with \texttt{SplitDelimiter} with delimiter \texttt{\symbol{92}x02}

  ~

  \tiny\input{splitdelim.tex}
\end{frame}

\section{RoadMap}
\begin{frame}

	\tableofcontents[currentsection]
\end{frame}

\begin{frame}{Road Map of GoodGuy ReverseIngBoy}
%%\begin{enumerate}
%%\item Sorting Input
%%
%%\bigskip
%%
%%\item Delimiting fields
%%
%%\bigskip 
%%
%%\item Characterizing fields
%%
%%\bigskip
%%
%%\item Assessing impact of the fields
%%
%%\bigskip
%%
%%\item Verifying hypothesis made in 3 and 4
%%\end{enumerate}
%\begin{center}
%\scalebox{0.7}{
%\smartdiagram[priority descriptive diagram]{
%  Verifying hypothesis made in 3 and 4,
%  Assessing impact of the fields,
%  Characterizing fields,
%  Delimiting fields,
%  Sorting Input}}
%\end{center}

%\begin{frame}
\begin{center}
\scalebox{0.9}{
\begin{tikzpicture}[node distance=1.5cm,
    every node/.style={fill=white, font=\sffamily}, align=center]

\node (Input)             [activityStarts]              {Input};

\node (SI)     [process, below of=Input]          {Sorting};

\node (DF)     [process, below of=SI]          {Delimiting Fields};

\node (CF)     [process, below of=DF]          {Characterizing Fields};

\node (AI)     [process, below of=CF]          {Assessing Impact of the Field};

\node (VH)     [process, below of=AI]          {Verifying Hypothesis};

\draw[->]             (Input) -- (SI);
\draw[->]             (SI) -- (DF);
\draw[->]             (DF) -- (CF);
\draw[->]             (CF) -- (AI);
\draw[->]             (AI) -- (VH);
  \end{tikzpicture}}
  \end{center}



\end{frame}



\begin{frame}{Sorting Input}
\begin{center}
\scalebox{0.9}{
\begin{tikzpicture}[node distance=1.5cm,
    every node/.style={fill=white, font=\sffamily}, align=center]

\node (Input)             [activityStarts]              {Input};

\node (SI)     [startstop, below of=Input]          {Sorting};

\node (DF)     [process, below of=SI]          {Delimiting Fields};

\node (CF)     [process, below of=DF]          {Characterizing Fields};

\node (AI)     [process, below of=CF]          {Assessing Impact of the Field};

\node (VH)     [process, below of=AI]          {Verifying Hypothesis};

\draw[->]             (Input) -- (SI);
\draw[->]             (SI) -- (DF);
\draw[->]             (DF) -- (CF);
\draw[->]             (CF) -- (AI);
\draw[->]             (AI) -- (VH);
  \end{tikzpicture}}
  \end{center}
\end{frame}



\begin{frame}{Divide and Conquer}
\begin{center}
\includegraphics[scale=0.25]{Sorting_by_type.png}
\end{center}
\end{frame}


%\section{Basic Tools}
%\begin{frame}
%
%	\tableofcontents[currentsection]
%\end{frame}
%
%\begin{frame}
%getting pcap
%
%sorting pcap
%
%verify cruciality
%
%verify timeout
%
%send 1 message
%...
%
%
%\end{frame}
\begin{frame}{Delimiting Fields}
\begin{center}
\scalebox{0.9}{
\begin{tikzpicture}[node distance=1.5cm,
    every node/.style={fill=white, font=\sffamily}, align=center]

\node (Input)             [activityStarts]              {Input};

\node (SI)     [process, below of=Input]          {Sorting};

\node (DF)     [startstop, below of=SI]          {Delimiting Fields};

\node (CF)     [process, below of=DF]          {Characterizing Fields};

\node (AI)     [process, below of=CF]          {Assessing Impact of the Field};

\node (VH)     [process, below of=AI]          {Verifying Hypothesis};

\draw[->]             (Input) -- (SI);
\draw[->]             (SI) -- (DF);
\draw[->]             (DF) -- (CF);
\draw[->]             (CF) -- (AI);
\draw[->]             (AI) -- (VH);
  \end{tikzpicture}}
  \end{center}
\end{frame}

%
\begin{frame}{Delimiters}
\begin{itemize}
\item Statistical research

\bigskip

\item Active verification

\bigskip

\item Double elimination
\end{itemize}

\end{frame}

\begin{frame}{Delimiters using}
    Analyse with \texttt{Delim}

  ~

  \tiny\input{newdelim.tex}
\end{frame}

\begin{frame}{SmartAligned}
  Analyse with \texttt{SmartAligned}

  ~

  \tiny\input{shapingsplitalign.tex}
\end{frame}



\begin{frame}{Characterizing Fields}
\begin{center}
\scalebox{0.9}{
\begin{tikzpicture}[node distance=1.5cm,
    every node/.style={fill=white, font=\sffamily}, align=center]

\node (Input)             [activityStarts]              {Input};

\node (SI)     [process, below of=Input]          {Sorting};

\node (DF)     [process, below of=SI]          {Delimiting Fields};

\node (CF)     [startstop, below of=DF]          {Characterizing Fields};

\node (AI)     [process, below of=CF]          {Assessing Impact of the Field};

\node (VH)     [process, below of=AI]          {Verifying Hypothesis};

\draw[->]             (Input) -- (SI);
\draw[->]             (SI) -- (DF);
\draw[->]             (DF) -- (CF);
\draw[->]             (CF) -- (AI);
\draw[->]             (AI) -- (VH);
  \end{tikzpicture}}
  \end{center}
\end{frame}

\begin{frame}{Characterizing Fields}
\begin{itemize}
\item Static / Dynamic

\bigskip

\item Txt / Bin
\end{itemize}
\end{frame}



\begin{frame}{Assessing the Impact of the Fields}
\begin{center}
\scalebox{0.9}{
\begin{tikzpicture}[node distance=1.5cm,
    every node/.style={fill=white, font=\sffamily}, align=center]

\node (Input)             [activityStarts]              {Input};

\node (SI)     [process, below of=Input]          {Sorting};

\node (DF)     [process, below of=SI]          {Delimiting Fields};

\node (CF)     [process, below of=DF]          {Characterizing Fields};

\node (AI)     [startstop, below of=CF]          {Assessing Impact of the Field};

\node (VH)     [process, below of=AI]          {Verifying Hypothesis};

\draw[->]             (Input) -- (SI);
\draw[->]             (SI) -- (DF);
\draw[->]             (DF) -- (CF);
\draw[->]             (CF) -- (AI);
\draw[->]             (AI) -- (VH);
  \end{tikzpicture}}
  \end{center}
\end{frame}

\begin{frame}{Fields Order Importance}
\begin{center}
\includegraphics[scale=0.25]{swapFieldOrder.png}
\end{center}
\end{frame}

\begin{frame}{Finding Incrementation }
\begin{center}
\includegraphics[scale=0.3]{incrementation.png}
\end{center}
\end{frame}





\input{fuzzing.tex}


\begin{frame}{Verifying Hypothesis}
\begin{center}
\scalebox{0.9}{
\begin{tikzpicture}[node distance=1.5cm,
    every node/.style={fill=white, font=\sffamily}, align=center]

\node (Input)             [activityStarts]              {Input};

\node (SI)     [process, below of=Input]          {Sorting};

\node (DF)     [process, below of=SI]          {Delimiting Fields};

\node (CF)     [process, below of=DF]          {Characterizing Fields};

\node (AI)     [process, below of=CF]          {Assessing Impact of the Field};

\node (VH)     [startstop, below of=AI]          {Verifying Hypothesis};

\draw[->]             (Input) -- (SI);
\draw[->]             (SI) -- (DF);
\draw[->]             (DF) -- (CF);
\draw[->]             (CF) -- (AI);
\draw[->]             (AI) -- (VH);
  \end{tikzpicture}}
  \end{center}
  
  \end{frame}
  
  \begin{frame}{Verifying Hypothesis}
  \begin{itemize}
  \item Change a static field

  $\Rightarrow$ get no error/timeout $\rightarrow$ False H
  
  \bigskip

  \item Put binary value in a text field
  
  $\Rightarrow$ get no error/timeout $\rightarrow$ False H
  
  
\bigskip

  \item Try to swap fields
  
\bigskip

	\item ...  
  \end{itemize}
  \end{frame}


\section{Future Work}
\begin{frame}

	\tableofcontents[currentsection]
\end{frame}

\begin{frame}{Improvements}

\begin{itemize}
    \item apply \texttt{CrucialSearch} on larger scale
    \item dependency of fields\\
    \quad\quad $\rightarrow$ apply fuzzing on a particular field
    \item analyzing impact of field field modification\\
    \begin{center}\includegraphics[scale=0.5]{relations.png}\end{center}
    \item scripting the whole process
\end{itemize}
\end{frame}


\begin{frame}{Conclusion}
\begin{itemize}
\item Good Points
\begin{itemize}
\item Team cohesion 
\item Interest for the subject
\item Many ideas
\item Late organization
\end{itemize}

\item Points to Improve 
\begin{itemize}
\item Extend the time allowed for toying with tools
\item Early organization 
\item Limiting the area of research
\end{itemize}
\end{itemize}


\end{frame}

\end{document}
